<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Witchcraft: How to install and use</title>

    <link rel="stylesheet" href="index.css">
</head>
<body>

<div class="container">
    <h1>Witchcraft</h1>
    <img class="witch" src="witch.svg" alt="">
    <img class="hat" src="witch-hat.svg" alt="">

    <a id="header-store-badge" class="image" href="https://chrome.google.com/webstore/detail/witchcraft-inject-js-and/hokcepcfcicnhalinladgknhaljndhpc?hl=en" target="_blank">
        <img class="store-badge" src="ChromeWebStore_Badge_v2_340x96.png" alt="">
    </a>

    <p class="menu">
        <a href="index.html">Home</a>
        <a href="https://github.com/luciopaiva/witchcraft" target="_blank">Source code</a>
    </p>

    <article>
        <h2>How to install and use</h2>

        <h3>Step 1: Install Chrome extension</h3>

        <section>
            <p>Get it <a href="https://chrome.google.com/webstore/detail/witchcraft-inject-js-and/hokcepcfcicnhalinladgknhaljndhpc" target="_blank">here</a>.</p>
        </section>

        <h3>Step 2: Install Web Server Chrome app</h3>

        <section>
            <p>Get it <a href="https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb" target="_blank">here</a>.</p>
        </section>

        <h3>Step 3: Configure Web Server Chrome app</h3>

        <section>
            <p><span class="title">Witchcraft</span> will try to load files from <span class="code">http://127.0.0.1:5743</span> (irrelevant note: <span class="code">0x53</span> and <span class="code">0x43</span> are ASCii codes for <em>W</em> and <em>C</em>). For instance, to load <span class="code">google.com.js</span>, the request URL will be <span class="code">http://127.0.0.1:5743/google.com.js</span>.</p>

            <p>That's what the Web Server Chrome app is for (see step 2). This app will let you serve files from a given folder at some designated port. Choose port <span class="code">5743</span> and select the folder where your scripts will be located (suggested folder: <span class="code">~/.witchcraft</span>). Mark it to automatically start so you don't have to worry about it ever again:</p>

            <img class="screenshot" src="web-server.png" alt="Web Server Chrome app configuration window">
        </section>

        <h2>Advanced notes</h2>

        <h3>Installation notes</h3>

        <section>
            <p>In step 1, you can install <span class="title">Witchcraft</span> as a development extension instead (look for the extension under the folder `/chrome-extension` and manually load it as an unpacked extension).</p>

            <p>In step 3, you are free to use whatever server you prefer. All it has to do is to be able to serve files directly from the folder where you chose to store your scripts. For other options, check this
                <a href="https://gist.github.com/willurd/5720255">gist</a> with a thorough list of ways to serve a local folder.</p>
        </section>

        <h3>Technical notes</h3>

        <section>
            <p>Witchcraft listens for every <em>frame</em> being loaded in Chrome, parsing its location's host name. Then, for every domain level combination, it looks for JavaScript and CSS files by requesting them to the local server.</p>

            <p>Chrome extensions have a very strict policy regarding access to the file system. That's why Witchcraft needs a local web server. Unfortunately, the only way to not depend on a local server would be to also have a Chrome app (apps are allowed to do some things that extensions can't). The problem is that new Chrome apps are not being accepted by the store any more, because Google is discontinuing support for them on all platforms except ChromeOS. I tried even serving scripts from inside the extension folder, but Chrome complains that the extension installation is corrupt and disables the extension. So it looks like we're stuck with either installing a third-party app that does that or running our own local server.</p>
        </section>

    </article>

    <a class="image" href="https://chrome.google.com/webstore/detail/witchcraft-inject-js-and/hokcepcfcicnhalinladgknhaljndhpc?hl=en" target="_blank">
        <img class="center store-badge" src="ChromeWebStore_Badge_v2_340x96.png" alt="">
    </a>

    <hr>

    <p class="footnote right">Made by <a href="http://luciopaiva.com" target="_blank">Lucio Paiva</a> - July 2018</p>
    <p class="footnote left">View <a href="//github.com/luciopaiva/witchcraft" target="_blank">source</a> on GitHub</p>
</div>

</body>
</html>